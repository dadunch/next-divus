generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model activity_logs {
  id         BigInt    @id @default(autoincrement())
  user_id    BigInt?
  action     String
  details    String
  created_at DateTime? @default(now()) @db.Timestamptz(6)
  users      users?    @relation(fields: [user_id], references: [id], onUpdate: NoAction)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model category {
  id       BigInt     @id @unique @default(autoincrement())
  bidang   String     @db.VarChar
  projects projects[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model client {
  id          BigInt     @id(map: "products_pkey") @default(autoincrement())
  client_name String
  client_logo String
  created_at  DateTime?  @default(now()) @db.Timestamptz(6)
  updated_at  DateTime?  @default(now()) @db.Timestamptz(6)
  projects    projects[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model company_photos {
  id         BigInt    @id @default(autoincrement())
  title      String?
  image_url  String
  created_at DateTime? @default(now()) @db.Timestamptz(6)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model company_profile {
  id               BigInt    @id @default(autoincrement())
  company_name     String
  business_field   String
  established_date DateTime  @db.Date
  email            String
  phone            String
  address          String
  description      String
  logo_url         String?
  updated_at       DateTime? @default(now()) @db.Timestamptz(6)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model employee {
  id       BigInt @id @default(autoincrement())
  users_id BigInt
  role_id  BigInt
  role     role   @relation(fields: [role_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users    users  @relation(fields: [users_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model menu {
  id        BigInt      @id(map: "menu_role_pkey") @default(autoincrement())
  nama_menu String      @db.VarChar
  url       String?     @db.VarChar
  icon      String?
  is_parent Int?        @db.SmallInt
  parent_id Int?        @db.SmallInt
  menu_role menu_role[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model menu_role {
  id      BigInt  @id(map: "menu_role_pkey1") @default(autoincrement())
  menu_id BigInt
  role_id BigInt?
  menu    menu    @relation(fields: [menu_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  role    role?   @relation(fields: [role_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model product {
  id          BigInt   @id @unique @default(autoincrement())
  created_at  DateTime @default(now()) @db.Timestamptz(6)
  nama_produk String?  @db.VarChar
  foto_produk String?
  tahun       BigInt?
  deskripsi   String?
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model projects {
  id           BigInt    @id @default(autoincrement())
  project_name String
  client_id    BigInt
  category_id  BigInt
  tahun        BigInt?
  created_at   DateTime? @default(now()) @db.Timestamptz(6)
  updated_at   DateTime? @default(now()) @db.Timestamptz(6)
  category     category  @relation(fields: [category_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  client       client    @relation(fields: [client_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model role {
  id        BigInt      @id @unique @default(autoincrement())
  role      String      @db.VarChar
  employee  employee[]
  menu_role menu_role[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model services {
  id          BigInt    @id @default(autoincrement())
  title       String
  slug        String    @unique
  description String?
  icon_url    String?
  created_at  DateTime? @default(now()) @db.Timestamptz(6)
  updated_at  DateTime? @default(now()) @db.Timestamptz(6)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model users {
  id            BigInt          @id @default(autoincrement())
  username      String
  password      String
  created_at    DateTime?       @default(now()) @db.Timestamptz(6)
  updated_at    DateTime?       @default(now()) @db.Timestamptz(6)
  activity_logs activity_logs[]
  employee      employee[]
}
